<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
	<style type="text/css">
		#container{
			width: 100%;
			height: 200px;
			background-color: #444;
			text-align: center;
			font-size: 30px;
			line-height: 200px;
		}
	</style>
</head>
<body>
<div id="container">
	
</div>	
<script type="text/javascript">
	function getEl(id){
		return document.getElementById(id);
	}
	var count = 0;
	var oDiv = getEl('container');
	function move(e){
		console.log(e)
		count++;
		// this.innerHTML = count;
		oDiv.innerHTML = count;
		// console.log(this);
	}
	// 封装一个节流函数
	// @param  func  回调函数
	// @param  wait  延时
	function debounce(func, wait){
		var timeout;
		// console.log(this);//指向window元素
		return function(){
			// console.log(this);//指向oDiv元素
			// 判断定时器是否存在
			// 如果存在清除
			// 那么我们就在这个位置保存一下this
			var context = this;
			// console.log(context)
			if(timeout){
				clearTimeout(timeout);
			}
			timeout = setTimeout(function(){
				// 让这个func的执行环境是在oDiv这个对象下执行
				// 改变了func的this的指向，此时指向oDiv
				func.apply(context);
			},wait);
		}

	}
	oDiv.onmousemove = debounce(move,1000)
</script>
</body>
</html>